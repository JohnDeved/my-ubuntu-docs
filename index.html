<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>my-ubuntu-docs</title>
<link rel="stylesheet" href="https://stackedit.io/res-min/themes/base.css" />
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body><div class="container"><h1 id="login-to-ssh">Login to SSH</h1>

<ul>
<li><p>download &amp; install OpenSSH</p>

<ul><li><a href="http://www.mls-software.com/opensshd.html">http://www.mls-software.com/opensshd.html</a></li></ul></li>
<li><p>open command prompt</p>

<ul><li>win + “<code>cmd</code>”</li></ul></li>
<li><p>use openssh to login</p>

<ul><li><p><code>ssh user@adress</code></p>

<blockquote>
  <p><img src="https://i.gyazo.com/803230452719537b262a9f3dcf63f373.png" alt="cmd" title=""></p>
</blockquote></li>
<li><p>enter password</p>

<blockquote>
  <p><img src="https://i.gyazo.com/7136fbc0f033a3c34bb67cf3046f98d3.png" alt="cmd" title=""></p>
</blockquote></li></ul></li>
</ul>



<h1 id="nodejs-npm-setup">Node.js &amp; npm setup</h1>

<ul>
<li><p>download Node.js</p>

<ul><li><code>curl -sL https://deb.nodesource.com/setup_7.x | sudo -E bash -</code></li></ul></li>
<li><p>install Node.js</p>

<ul><li><code>sudo apt-get install -y nodejs</code></li></ul></li>
<li><p>check version </p>

<ul><li><code>node -v</code> </li>
<li><code>npm -v</code></li></ul></li>
</ul>

<p><em>source: <a href="https://nodejs.org/en/download/package-manager/">https://nodejs.org/en/download/package-manager/</a></em></p>



<h1 id="git-deployment">Git Deployment</h1>

<ul>
<li><p>create a repository folder</p>

<ul><li><code>cd /var/</code></li>
<li><code>mkdir repo</code></li>
<li><code>cd repo</code></li>
<li><code>mkdir myProject.git</code></li></ul></li>
<li><p>init git repository (bare)</p>

<ul><li><code>cd myProject.git</code></li>
<li><code>git init --bare</code></li></ul></li>
<li><p>create hook that deploys the code</p>

<ul><li><code>cd hooks</code></li>
<li><p><code>vi post-receive</code></p>

<pre><code>    #!/bin/sh
    git --work-tree=/var/www/myproject.com --git-dir=/var/repo/myproject.git checkout -f
</code></pre></li></ul>

<blockquote>
  <p><img src="https://i.gyazo.com/6c135d9c0d87cbc782d8641e7b41b2b1.png" alt="cmd" title=""> <br>
  </p><ul><li><p>forever restart script can also be added here:</p></li></ul><p></p>
</blockquote>

<pre><code>forever restartall
</code></pre></li>
<li><p>give script exec permission <br>
<code>chmod +x post-receive</code></p></li>
<li><p>add as remote on your local machine <br>
eg <code>ssh://root@183.62.177.218/var/repo/myproject.git</code></p></li></ul>


<p><em>source: <a href="https://www.youtube.com/watch?v=9qIK8ZC9BnU">https://www.youtube.com/watch?v=9qIK8ZC9BnU</a></em></p>



<h1 id="add-ssh-key-for-ssh-or-git">add SSH-key for ssh or git</h1>

<ul>
<li><p>edit keys file</p>

<ul><li><code>vi .etc/authorized_keys</code></li>
<li>paste your shh public key <em>rsa.pub</em> (generated by eg. your git client)</li></ul>

<blockquote>
  <p><img src="https://i.gyazo.com/a63723692c9a1e93394b2da7f4c55e98.png" alt="" title=""></p>
</blockquote></li>
<li><p>reload</p>

<ul><li><code>reload ssh</code></li></ul></li>
</ul>

<p><em>source: <a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-ssh-keys--2">https://www.digitalocean.com/community/tutorials/how-to-set-up-ssh-keys–2</a></em></p>



<h1 id="import-ssh-key-into-openssh">import SSH-key into OpenSSH</h1>

<ul>
<li><p>set HOME variable in windows to your user folder</p>

<ul><li>tutorial (win10): <a href="http://superuser.com/questions/949560/how-do-i-set-system-environment-variables-in-windows-10">http://superuser.com/questions/949560/how-do-i-set-system-environment-variables-in-windows-10</a></li></ul></li>
<li><p>download puttygen</p>

<ul><li><a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html">http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html</a></li></ul></li>
<li><p>load private key</p>

<blockquote>
  <p><img src="https://i.gyazo.com/c581075a12fe5c247418aea4fd84ad2b.png" alt="" title=""></p>
</blockquote></li>
<li><p>select ‘all files’</p>

<blockquote>
  <p><img src="https://i.gyazo.com/3b93c517f9b32f83bb11a77a18ad8654.png" alt="" title=""></p>
</blockquote></li>
<li><p>select private key</p>

<blockquote>
  <p><img src="https://i.gyazo.com/1572aaf07e479c25a3d6340b08f4a6f9.png" alt="" title=""></p>
</blockquote></li>
<li><p>export OpenSSH key</p>

<blockquote>
  <p><img src="https://i.gyazo.com/1e859a154e98345d8e7f44969a58ee71.png" alt="" title=""></p>
</blockquote></li>
<li><p>save it as “<code>id_rsa</code>” in your .ssh folder</p></li>
</ul>

<p><em>source: <a href="http://stackoverflow.com/questions/24740943/how-to-add-existing-key-to-openssh-on-windows">http://stackoverflow.com/questions/24740943/how-to-add-existing-key-to-openssh-on-windows</a></em>  </p>



<h1 id="boot-script">Boot Script</h1>

<ul>
<li><p>edit rc.local</p>

<ul><li><code>vi /etc/rc.local</code></li>
<li><p>add scripts that should run on boot</p>

<pre><code>forever start &lt;your script path&gt;
</code></pre></li></ul></li>
</ul>

<p><em>source: <a href="https://www.youtube.com/watch?v=P4mT5Tbx_KE">https://www.youtube.com/watch?v=P4mT5Tbx_KE</a></em>  </p>



<h1 id="create-proxy-to-host-multiple-sites">Create Proxy to host multiple sites</h1>

<ul>
<li><p>enable proxy modules</p>

<ul><li><code>a2enmod proxy</code></li>
<li><code>a2enmod proxy_http</code></li></ul></li>
<li><p>create sites-available file  </p>

<ul><li><code>cd /etc/apache2/sites-available</code></li>
<li><code>vi mysite.conf</code></li>
<li><p>insert your infos</p>

<pre><code>&lt;VirtualHost *:80&gt;
        ServerName sub.mydomain.com
        ProxyRequests off
        &lt;Proxy *&gt;
            Order allow,deny
            Allow from all
        &lt;/Proxy&gt;
        ProxyPass / http://localhost:3000/
        ProxyPassReverse / http://localhost:3000/
        ProxyPreserveHost on
&lt;/VirtualHost&gt;
</code></pre></li></ul></li>
<li><p>enable site    </p>

<ul><li><code>a2ensite mysite.conf</code></li>
<li>you can also disable sites the same way: <code>a2dissite mysite.conf</code></li></ul></li>
<li><p>restart Apache    </p>

<ul><li><code>service apache2 restart</code></li></ul></li>
</ul>

<p><em>source: <a href="https://www.digitalocean.com/community/tutorials/how-to-use-apache-http-server-as-reverse-proxy-using-mod_proxy-extension">https://www.digitalocean.com/community/tutorials/how-to-use-apache-http-server-as-reverse-proxy-using-mod_proxy-extension</a></em>  </p></div></body>
</html>
